var v=Object.defineProperty;var x=(r,e,t)=>e in r?v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var w=(r,e,t)=>(x(r,typeof e!="symbol"?e+"":e,t),t);import{_ as b,u as T,o,c as a,a as l,F as u,f as k,h as S,d as W,b as y,r as g,i as f}from"./app.18b275de.js";import{W as C}from"./Work.14c2caea.js";import{S as D,g as _}from"./index.0d2dceac.js";class O{constructor(e){w(this,"_works",[]);this._works=e}get worksOrigin(){return this._works}get works(){const e=this._works.map(t=>new C(t));return e.sort((t,i)=>i.priority-t.priority),e}}const z=600,B="worksTrigger",M={name:"Works",setup(){const{works:r}=T().value;return{works:new O(r).works}},data(){return{st:null,tl:null,isTouch:!0,resizeObserver:null,workSectionCount:0,activeWork:0}},mounted(){this.resizeObserver=new ResizeObserver(()=>{this.resetTrigger()}),this.resizeObserver.observe(document.getElementById("app")),this.$emitter.on("workSectionReady",()=>{this.workSectionCount++,this.workSectionCount===this.works.length&&this.resetTrigger()})},updated(){this.resetTrigger()},beforeUnmount(){this.disableTrigger(),this.resizeObserver.disconnect(),this.resizeObserver=null},methods:{setTrigger(){if(typeof window=="undefined"||(this.isTouch=window.innerWidth<1280||D.isTouch>0,this.isTouch))return;const{trigger:r,target:e}=this.$refs;if(!r||!e)return;const t=e.getBoundingClientRect().width-window.innerWidth,i=(this.works.length-1)*z;if(this.tl||t<=0)return;const d={id:B,trigger:r,start:"top top",end:`+=${i}`,scrub:!0,pin:!0,pinnedContainer:r},s=_.timeline({scrollTrigger:{...d}}),h=t/(this.works.length-1);s.addLabel("work-0");for(let n=1;n<this.works.length;n++)s.to(e,{x:-n*h}),s.addLabel(`work-${n}`);s.addLabel("end"),window.tl=s,this.st=s.scrollTrigger,this.tl=s},resetTrigger(){this.disableTrigger(),this.setTrigger()},disableTrigger(){!this.tl||(this.tl.scrollTrigger.kill(),this.tl.kill(),this.tl=null)},handleScrollDown(){const{start:r,end:e}=this.tl.scrollTrigger;window.scrollY+300<r&&_.to(window,{duration:.3,scrollTo:r})}}},$={id:"works",class:"relative"},L={key:0,class:"pt-10 pb-16 px-5"},N=l("h3",{class:"text-6xl font-cursive text-center"},"My Works",-1),R={class:"grid grid-cols-1 mt-10 gap-8 md:grid-cols-2 lg:grid-cols-3"},V={key:1,ref:"trigger",class:"w-screen max-w-full overflow-x-hidden"},E={class:"flex flex-col h-screen"},F={class:"text-6xl font-cursive text-center pt-10"},I=y("My Works "),U={ref:"target",class:"flex flex-1 flex-wrap pt-10 w-fit flex-nowrap"};function X(r,e,t,i,d,s){const h=g("WorkSectionMobile"),n=g("svg-icon"),p=g("WorkSectionDesktop");return o(),a("div",$,[d.isTouch?(o(),a("div",L,[N,l("div",R,[(o(!0),a(u,null,k(i.works,(c,m)=>(o(),f(h,{ref_for:!0,ref:"workSection",work:c},null,8,["work"]))),256))])])):(o(),a("div",V,[l("div",E,[l("h3",F,[I,l("button",{class:"inline-block w-10 h-10 animate-bounce",onClick:e[0]||(e[0]=S((...c)=>s.handleScrollDown&&s.handleScrollDown(...c),["prevent"]))},[W(n,{name:"scroll",color:"$000"})])]),l("div",U,[(o(!0),a(u,null,k(i.works,(c,m)=>(o(),f(p,{ref_for:!0,ref:"workSection",work:c,class:"relative w-screen h-[calc(100%-30px)] max-h-40vh work"},null,8,["work"]))),256))],512)])],512))])}var G=b(M,[["render",X],["__file","Works.vue"]]);export{G as default};
